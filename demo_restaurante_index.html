<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Gourmet Forge - Exclusive Menu</title>
    <!-- Tailwind CSS Load -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font and Custom Styles Configuration -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600;700&display=swap');
        
        :root {
            --primary-gold: #FFD700;
            --secondary-charcoal: #1a1a1a;
            --text-light: #f5f5f5;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: var(--text-light);
            /* Subtle sparkle pattern in the background */
            background-image: radial-gradient(circle, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .header-bg {
            background-color: var(--secondary-charcoal);
        }

        /* Style for the elegant, shiny frame */
        .shiny-frame {
            background: var(--secondary-charcoal);
            border: 1px solid rgba(255, 215, 0, 0.2); /* Subtle gold border */
            box-shadow: 
                0 0 5px rgba(255, 215, 0, 0.5),   /* Inner glow */
                0 0 10px rgba(255, 215, 0, 0.3),  /* Wider glow */
                inset 0 0 5px rgba(255, 215, 0, 0.1); /* Inner shadow for depth */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .shiny-frame:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 0 10px var(--primary-gold), 
                0 0 20px rgba(255, 215, 0, 0.5),
                inset 0 0 10px rgba(255, 215, 0, 0.2);
        }

        /* Style for the main action button */
        .btn-add {
            background-color: var(--primary-gold);
            color: #000;
            transition: background-color 0.3s, transform 0.1s;
        }

        .btn-add:active {
            transform: scale(0.98);
        }
        
        /* Style for the text glimmer animation */
        .glimmer-text {
            font-family: 'Cinzel', serif;
            color: var(--primary-gold);
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.8);
        }

        /* ---------------------------------------------------- */
        /* Sparkle Styles - MODIFICADO PARA EL EFECTO DE RASTRO */
        /* ---------------------------------------------------- */
        
        #sparkle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10; 
            pointer-events: none;
            overflow: hidden;
        }

        .sparkle {
            position: absolute;
            width: 4px; /* Tamaño base ligeramente mayor para mejor visibilidad */
            height: 4px; 
            background-color: var(--primary-gold);
            border-radius: 50%;
            /* Sombra más suave para simular el rastro de brillo */
            box-shadow: 
                0 0 5px rgba(255, 215, 0, 0.8), 
                0 0 10px rgba(255, 215, 0, 0.4);
            opacity: 0;
            pointer-events: none; 
            animation: sparkle-flow infinite linear; 
        }

        /* Keyframes para el flujo ascendente con efecto de estela */
        @keyframes sparkle-flow {
            0% { 
                opacity: 0; 
                transform: translateY(10vh) scale(0.5); /* Empieza bajo y pequeño */
            }
            20% { 
                opacity: 1; 
                transform: translateY(-20vh) scale(1.2); /* Máximo brillo y tamaño */
            }
            50% {
                opacity: 0.7; /* Opacidad alta para crear el rastro */
                transform: translateY(-50vh) scale(0.9);
            }
            100% { 
                opacity: 0; 
                transform: translateY(-110vh) scale(0.2); /* Se mueve muy alto y se desvanece por completo */
            }
        }

    </style>
</head>
<body class="antialiased">
    
    <!-- Sparkles Container -->
    <div id="sparkle-container"></div>

    <!-- Ingredients Modal -->
    <div id="ingredients-modal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-80 items-center justify-center p-4" onclick="closeIngredientsModal()">
        <div class="bg-gray-900 border border-yellow-600 p-6 md:p-8 rounded-xl max-w-lg w-full shiny-frame" onclick="event.stopPropagation()">
            <h3 id="modal-title" class="text-3xl font-bold mb-4 text-center text-yellow-500 glimmer-text"></h3>
            <p id="modal-ingredients" class="text-gray-300 leading-relaxed"></p>
            <button class="mt-6 w-full py-3 bg-yellow-500 text-black font-semibold rounded-lg hover:bg-yellow-400 transition" onclick="closeIngredientsModal()">Close</button>
        </div>
    </div>

    <!-- Header and Navigation -->
    <header class="header-bg sticky top-0 z-40 shadow-xl border-b border-yellow-800/50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold glimmer-text">The Gourmet Forge</h1>
            <nav class="hidden md:flex space-x-8">
                <a href="#dishes" class="text-lg text-gray-300 hover:text-yellow-500 transition font-semibold">Dishes</a>
                <a href="#drinks" class="text-lg text-gray-300 hover:text-yellow-500 transition font-semibold">Drinks</a>
                <a href="#desserts" class="text-lg text-gray-300 hover:text-yellow-500 transition font-semibold">Desserts</a>
                <a href="#order" class="text-lg text-yellow-500 hover:text-yellow-400 transition font-semibold">Place Order</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-yellow-500 text-2xl">
                <!-- Menu SVG Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden pb-4 px-4 space-y-2 border-t border-gray-700/50">
            <a href="#dishes" class="block text-gray-300 hover:text-yellow-500 py-1" onclick="toggleMobileMenu()">Dishes</a>
            <a href="#drinks" class="block text-gray-300 hover:text-yellow-500 py-1" onclick="toggleMobileMenu()">Drinks</a>
            <a href="#desserts" class="block text-gray-300 hover:text-yellow-500 py-1" onclick="toggleMobileMenu()">Desserts</a>
            <a href="#order" class="block text-yellow-500 hover:text-yellow-400 py-1" onclick="toggleMobileMenu()">Place Order</a>
        </div>
    </header>

    <main>
        <!-- Daily Special Section (Featured) -->
        <section class="mb-16">
            <div class="relative w-full h-72 md:h-80 overflow-hidden"> <!-- Reduced Height -->
                <!-- The new image URL is placed here -->
                <img src="https://i.imgur.com/9ygXfd5.png" 
                     alt="Featured dish of the day: A gourmet burger with exceptional presentation." 
                     class="w-full h-full object-cover opacity-60">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex flex-col items-center justify-center text-center p-4">
                    <h2 class="text-3xl md:text-5xl font-extrabold text-white glimmer-text uppercase mb-2">
                        Today's Feature
                    </h2>
                    <p class="text-lg md:text-2xl text-yellow-300 font-serif">
                        The Black Truffle: Pure indulgence.
                    </p>
                </div>
            </div>
        </section>

        <!-- Main Menu Container -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">

            <!-- Section: DISHES (Burgers) -->
            <section id="dishes" class="mb-16 pt-8">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 glimmer-text border-b pb-3 border-yellow-700/50">Exclusive Dishes</h2>
                <!-- Grid: 2 columns on mobile, 3 columns on larger screens -->
                <div id="dishes-container" class="grid grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Dishes will be rendered here with JS -->
                </div>
            </section>
            
            <div class="border-b border-yellow-900 my-8 opacity-30"></div>

            <!-- Section: DRINKS -->
            <section id="drinks" class="mb-16 pt-8">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 glimmer-text border-b pb-3 border-yellow-700/50">Signature Drinks</h2>
                <!-- Grid: 2 columns on mobile, 4 columns on larger screens -->
                <div id="drinks-container" class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
                    <!-- Drinks will be rendered here with JS -->
                </div>
            </section>
            
            <div class="border-b border-yellow-900 my-8 opacity-30"></div>

            <!-- Section: DESSERTS -->
            <section id="desserts" class="mb-16 pt-8">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 glimmer-text border-b pb-3 border-yellow-700/50">The Perfect Finish</h2>
                <!-- Grid: 2 columns on mobile, 4 columns on larger screens -->
                <div id="desserts-container" class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
                    <!-- Desserts will be rendered here with JS -->
                </div>
            </section>
        </div>

        <!-- Section: PLACE ORDER -->
        <section id="order" class="bg-gray-900 border-t-4 border-yellow-600/70 p-6 md:p-8 mt-10">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 glimmer-text">🛒 Place Order</h2>

                <!-- Order Summary (Updated by JS) -->
                <div class="mb-6 bg-gray-800 p-4 rounded-lg shiny-frame">
                    <p class="text-yellow-400 font-semibold mb-2">Your Current Order:</p>
                    <textarea id="order-summary-text" class="w-full h-32 bg-gray-900 text-gray-200 p-3 rounded-lg border border-yellow-700/30" readonly>Your order will appear here. Add dishes, drinks, or desserts.</textarea>
                    <p class="text-sm text-gray-400 mt-2">The order text will be pre-filled into the form.</p>
                </div>

                <!-- Order Form (Google Form Simulation) -->
                <div class="p-6 shiny-frame rounded-xl">
                    <h3 class="text-xl font-semibold mb-4 text-yellow-500">Required Order Details</h3>
                    
                    <!-- Table Number Field (Required) -->
                    <div class="mb-4">
                        <label for="table-number" class="block text-sm font-medium text-gray-300 mb-2">Table Number <span class="text-red-500">*</span></label>
                        <input type="number" id="table-number" placeholder="E.g.: 5" class="w-full p-3 bg-gray-900 border border-yellow-800/50 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 text-white" required min="1">
                    </div>

                    <!-- Specifications Field (Optional) -->
                    <div class="mb-6">
                        <label for="specifications" class="block text-sm font-medium text-gray-300 mb-2">Specifications (Optional)</label>
                        <textarea id="specifications" rows="3" placeholder="E.g.: The Black Truffle without onion rings." class="w-full p-3 bg-gray-900 border border-yellow-800/50 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 text-white"></textarea>
                    </div>

                    <!-- Button to Open Google Form with Pre-filled Order -->
                    <a id="submit-order-button" 
                       href="#" 
                       target="_blank" 
                       class="btn-add block w-full text-center py-3 rounded-lg font-bold text-xl uppercase shadow-lg hover:bg-yellow-400 transition cursor-pointer"
                       onclick="event.preventDefault(); openGoogleForm()">
                        SEND ORDER TO KITCHEN
                    </a>
                    <p class="text-xs text-gray-500 text-center mt-3">
                        *This will open a new window with your pre-filled order for final confirmation.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Global object to store inventory and orders
        const menuData = {
            platillos: [
                // Dish 1 video
                { id: 'p1', name: 'The Black Truffle', price: 28, description: 'Brioche, 200g Wagyu, Fontina, Truffle mayo.', ingredients: 'Brioche Bun, Wagyu Beef (200g), Fontina Cheese, Caramelized Onion Rings, Black Truffle Mayonnaise.', videoUrl: 'https://i.imgur.com/gAqz5q5.mp4' },
                { id: 'p2', name: 'The Imperial Smoke', price: 24, description: 'Pretzel, Shredded Rib, Aged Gouda.', ingredients: 'Pretzel Bun, Beef Patty, Slow Shredded Rib, House Smoked BBQ Sauce, Aged Gouda Cheese.' },
                { id: 'p3', name: 'The Mediterranean', price: 22, description: 'Lamb, Feta, Mint Tzatziki, Cucumber.', ingredients: 'Potato Bun, Lamb Patty, Feta Cheese, Mint Tzatziki Sauce, Homemade Pickled Cucumber.' },
                // Dish 4 video
                { id: 'p4', name: 'Sublime Vegan', price: 20, description: 'Whole Wheat, Roasted Portobello, Vegan Pesto.', ingredients: 'Sourdough Whole Wheat Bun, Roasted Portobello Mushroom, Cashew Cheese, Vegan Basil Pesto.', videoUrl: 'https://i.imgur.com/tIEvKfJ.mp4' },
                { id: 'p5', name: 'Classic Elite', price: 20, description: 'Angus Beef, Aged Cheddar, Artisan Ketchup.', ingredients: 'Sesame Bun, Angus Beef (180g), Aged Cheddar Cheese, Crispy Bacon, Artisan Tomato Ketchup.' },
                { id: 'p6', name: 'Asian Fusion', price: 26, description: 'Bao Bun, Teriyaki Glazed Pork, Kimchi.', ingredients: 'Steamed Bao Bun, Teriyaki Glazed Pork, Sriracha Mayonnaise, Fermented Cabbage Kimchi.' },
            ],
            bebidas: [
                // Drink 1 video
                { id: 'b1', name: 'Rose Lemonade', price: 8, description: 'With Cardamom and Orange Blossom hints.', ingredients: 'Fresh Lemon Juice, Rose Water, Agave Nectar, Cardamom Seeds, Crushed Ice.', videoUrl: 'https://i.imgur.com/Bi4vov2.mp4' },
                { id: 'b2', name: 'Craft Stout "Darkness"', price: 12, description: 'Artisan stout, notes of coffee and chocolate.', ingredients: 'Artisan Stout Beer (Roasted Barley, Hops, Yeast, Water), Cocoa and Coffee Infusion.' },
                { id: 'b3', name: 'Iced Hibiscus Tea', price: 7, description: 'Floral infusion with ginger and orange.', ingredients: 'Concentrated Hibiscus Flower Infusion, Ginger Slices, Orange Juice, Natural Sweetener.' },
                { id: 'b4', name: 'Premium Mineral Water', price: 5, description: 'Natural spring sparkling water.', ingredients: 'Natural Sparkling Spring Water. Served chilled.' },
            ],
            postres: [
                { id: 'd1', name: 'Chocolate Volcano', price: 16, description: 'Dark, liquid heart, and sea salt.', ingredients: 'Dark Chocolate Cake (70% Cacao) with a Liquid Center. Served with Vanilla Ice Cream and Sea Salt Flakes.' },
                { id: 'd2', name: 'Citrus Cheesecake', price: 14, description: 'Passion Fruit spheres and almond crust.', ingredients: 'Baked Cheesecake with Almond Crust. Topped with Gelatin and Exploding Passion Fruit Pulp Spheres.' },
                { id: 'd3', name: 'Pistachio Macarons', price: 10, description: 'Duo of macarons with cream filling.', ingredients: 'Two Almond Macarons filled with Sicilian Pistachio Buttercream.' },
                { id: 'd4', name: 'Whiskey Brownie', price: 13, description: 'Dense brownie with a hint of malt.', ingredients: 'Chocolate Brownie with Walnuts and a Reduced Malt Whiskey Glaze. Served warm.' },
            ]
        };

        // Global order state: { item_id: quantity }
        let currentOrder = {};

        // --- GOOGLE FORM CONFIGURATION (ACTUAL IDs) ---
        const FORM_BASE_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfp7FPRbx1LMVOQ8BdIG1233m0pIPfRM_QvxP59EQRd0MoKnA/viewform"; 
        const ENTRY_ID_PEDIDO = "424389717"; 
        const ENTRY_ID_MESA = "1719096060";    
        const ENTRY_ID_ESPECIFICACIONES = "1916930978"; 
        // ---------------------------------------------------


        // Function to render a single menu item
        function renderMenuItem(item, type) {
            
            let mediaHTML; // Variable to hold either the <img> or <video> tag

            if (item.videoUrl) {
                // If a video URL exists, use a video element
                mediaHTML = `
                    <video class="w-full h-full object-cover" autoplay loop muted playsinline>
                        <source src="${item.videoUrl}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                `;
            } else {
                // Otherwise, use the standard image placeholder
                let imagePlaceholder;
                if (type === 'platillos') {
                    imagePlaceholder = `https://placehold.co/400x200/1a1a1a/FFD700?text=Dish+${item.id.slice(1)}`; 
                } else if (type === 'bebidas') {
                    imagePlaceholder = `https://placehold.co/400x200/1a1a1a/FFD700?text=Drink+${item.id.slice(1)}`; 
                } else {
                    imagePlaceholder = `https://placehold.co/400x200/1a1a1a/FFD700?text=Dessert+${item.id.slice(1)}`; 
                }
                mediaHTML = `<img src="${imagePlaceholder}" alt="${item.name}" class="w-full h-full object-cover">`;
            }

            // Generate the HTML for the item
            return `
                <div id="item-${item.id}" class="shiny-frame rounded-xl p-3 flex flex-col justify-between h-full">
                    <div>
                        <!-- Media Placeholder Container -->
                        <div class="h-28 overflow-hidden rounded-lg mb-3 border border-yellow-800/20">
                            ${mediaHTML} <!-- Inserts video or image -->
                        </div>
                        
                        <!-- Name and Price -->
                        <div class="flex justify-between items-start mb-1">
                            <h3 class="text-lg font-bold text-yellow-500 leading-tight">${item.name}</h3>
                            <p class="text-xl font-extrabold text-yellow-400">$${item.price}</p>
                        </div>
                        <p class="text-gray-400 text-xs mb-3 truncate">${item.description}.</p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center space-x-2 pt-2 border-t border-gray-700/50">
                        <!-- View Ingredients Button -->
                        <button onclick="showIngredientsModal('${item.id}')" 
                                class="flex-grow py-1 text-xs border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700 transition">
                            View Ingredients
                        </button>
                        
                        <!-- Quantity/Add/Remove Buttons (Compact) -->
                        <div class="flex items-center space-x-1">
                            <!-- Remove Button (-) -->
                            <button onclick="updateOrder('${item.id}', 'remove')" class="bg-red-700 text-white font-bold w-7 h-7 flex items-center justify-center rounded-full hover:bg-red-600 transition p-1">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" />
                                </svg>
                            </button>
                            <!-- Quantity Display -->
                            <span id="quantity-${item.id}" class="text-sm font-bold w-4 text-center text-white">${currentOrder[item.id] || 0}</span>
                            <!-- Add Button (+) -->
                            <button onclick="updateOrder('${item.id}', 'add')" class="btn-add w-7 h-7 flex items-center justify-center rounded-full font-bold shadow-lg hover:bg-yellow-400 transition p-1">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Main function to initialize the menu
        function initializeMenu() {
            document.getElementById('dishes-container').innerHTML = menuData.platillos.map(item => renderMenuItem(item, 'platillos')).join('');
            document.getElementById('drinks-container').innerHTML = menuData.bebidas.map(item => renderMenuItem(item, 'bebidas')).join('');
            document.getElementById('desserts-container').innerHTML = menuData.postres.map(item => renderMenuItem(item, 'postres')).join('');
            updateOrderSummary();
            createSparkles(); // Create the visual sparkles
        }
        
        // Function to create and add random sparkles (Duration updated for flow effect)
        function createSparkles() {
            const container = document.getElementById('sparkle-container');
            const numberOfSparkles = 50; 
            
            for (let i = 0; i < numberOfSparkles; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                // Random position, size, delay, and duration
                const size = Math.random() * 2 + 1; // 1px to 3px
                sparkle.style.width = `${size}px`;
                sparkle.style.height = `${size}px`;
                
                // Random initial position
                sparkle.style.top = `${Math.random() * 100}%`;
                sparkle.style.left = `${Math.random() * 100}%`;
                
                const delay = Math.random() * 5; // 0s to 5s
                sparkle.style.animationDelay = `${delay}s`;
                
                // Increased duration for a slower, more visible upward flow
                const duration = Math.random() * 5 + 8; // 8s to 13s
                sparkle.style.animationDuration = `${duration}s`;
                
                container.appendChild(sparkle);
            }
        }


        // Function to update the order
        function updateOrder(itemId, action) {
            const currentQuantity = currentOrder[itemId] || 0;

            if (action === 'add') {
                currentOrder[itemId] = currentQuantity + 1;
            } else if (action === 'remove' && currentQuantity > 0) {
                currentOrder[itemId] = currentQuantity - 1;
            }

            if (currentOrder[itemId] === 0) {
                delete currentOrder[itemId];
            }
            
            // Update the visible quantity on the menu item
            const quantitySpan = document.getElementById(`quantity-${itemId}`);
            if (quantitySpan) {
                quantitySpan.textContent = currentOrder[itemId] || 0;
            }
            
            // Update the order summary
            updateOrderSummary();
        }

        // Function to generate and update the order summary
        function updateOrderSummary() {
            const summaryTextArea = document.getElementById('order-summary-text');
            const allItems = [...menuData.platillos, ...menuData.bebidas, ...menuData.postres];
            let summary = '';
            let total = 0;
            let orderItemsCount = 0;

            // 1. Create the detailed summary
            for (const itemId in currentOrder) {
                const quantity = currentOrder[itemId];
                if (quantity > 0) {
                    const item = allItems.find(i => i.id === itemId);
                    if (item) {
                        const subtotal = quantity * item.price;
                        summary += `${quantity}x ${item.name} ($${item.price} each) = $${subtotal.toFixed(2)}\n`;
                        total += subtotal;
                        orderItemsCount++;
                    }
                }
            }

            // 2. Format the final output
            if (orderItemsCount === 0) {
                summaryTextArea.value = "Your order is empty. Add something delicious!";
                document.getElementById('submit-order-button').classList.add('opacity-50', 'pointer-events-none');
            } else {
                summary += '\n-------------------------------\n';
                summary += `ESTIMATED TOTAL: $${total.toFixed(2)}`;
                summaryTextArea.value = summary;
                document.getElementById('submit-order-button').classList.remove('opacity-50', 'pointer-events-none');
            }
        }

        // Function to display the ingredients modal
        function showIngredientsModal(itemId) {
            const allItems = [...menuData.platillos, ...menuData.bebidas, ...menuData.postres];
            const item = allItems.find(i => i.id === itemId);

            if (item) {
                document.getElementById('modal-title').textContent = item.name;
                document.getElementById('modal-ingredients').innerHTML = `
                    <p class="font-semibold text-yellow-500 mb-2">Main Ingredients:</p>
                    <p class="text-lg">${item.ingredients}</p>
                `;
                document.getElementById('ingredients-modal').classList.remove('hidden');
                document.getElementById('ingredients-modal').classList.add('flex');
            }
        }

        // Function to close the ingredients modal
        function closeIngredientsModal() {
            document.getElementById('ingredients-modal').classList.add('hidden');
            document.getElementById('ingredients-modal').classList.remove('flex');
        }

        /**
         * Function to open the Google Form with all fields pre-filled.
         * The customer needs one final click on the Google Form page to submit.
         */
        function openGoogleForm() {
            const orderSummary = document.getElementById('order-summary-text').value;
            const tableNumber = document.getElementById('table-number').value;
            const specifications = document.getElementById('specifications').value;
            
            // Mandatory validation
            if (!tableNumber || orderSummary.includes('empty')) {
                alertMessage('⚠️ Order Error', `Please make sure to:
                    <ul class="list-disc list-inside mt-2 ml-4">
                        <li>Add at least one product to your order.</li>
                        <li>Enter your Table Number (required field).</li>
                    </ul>
                `);
                return;
            }
            
            // 1. ENCODE DATA for the URL
            const encodedOrder = encodeURIComponent(orderSummary);
            const encodedTable = encodeURIComponent(tableNumber);
            const encodedSpecs = encodeURIComponent(specifications);

            // 2. BUILD THE PRE-FILLED URL
            // This URL includes all order data, table number, and specifications
            const finalFormUrl = `${FORM_BASE_URL}?usp=pp_url&entry.${ENTRY_ID_PEDIDO}=${encodedOrder}&entry.${ENTRY_ID_MESA}=${encodedTable}&entry.${ENTRY_ID_ESPECIFICACIONES}=${encodedSpecs}`;

            // 3. Open the URL in a new tab/window
            window.open(finalFormUrl, '_blank');
        }
        
        // Custom alert message function (does NOT use window.alert)
        function alertMessage(title, messageHtml) {
            const modal = document.getElementById('ingredients-modal');
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-ingredients').innerHTML = messageHtml;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Toggle for mobile menu
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
        document.getElementById('mobile-menu-button').onclick = toggleMobileMenu;

        // Initialize the menu and sparkles on page load
        window.onload = initializeMenu;

    </script>
</body>
</html>
